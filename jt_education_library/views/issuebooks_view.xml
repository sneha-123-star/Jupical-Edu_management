<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

        <!-- IssueBooks Form View -->
        <record id="issuebook_form_view" model="ir.ui.view">
            <field name="name">Issue Books Form View</field>
            <field name="model">issue.books</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button name="books_issued" string="Issue" type="object" class="oe_highlight" states="returned,cancel"/>
                        <button name="books_returned" string="Return" type="object" class="oe_highlight" states="issued,cancel"/>
                        <button name="books_cancel" string="Cancel" type="object" class="oe_highlight" states="issued,returned,lost"/>
                        <button name="books_lost" string="Lost" type="object"
                            class="oe_highlight" states="issued,returned,cancel"/>
                        <button name="issuebook_xls_report_template" string="Print Issue Details XLS Report" type="object"  class="oe_highlight" states='issued,returned,lost'/>
                        <field name="state" widget="statusbar" statusbar_visible="issued,returned,cancel,lost"></field>
                    </header>
                    <sheet>
                        <!-- <field name="issuebooks_image" widget="image" class="oe_avatar"/> -->
                        <group>
                            <group string="Book Information">
                                <field name="issuebooks_code" readonly="1"/>
                                <field name="datetime_issue" readonly="1"/>
                                <field name="date_return" widget="date"/>
                            </group>
                            <group string="Student Information">
                                <field name="student_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create':True}"/>
                                <field name="standard"/>
                                <field name="division"/>
                                <field name="roll_no"/>
                            </group>  
                        </group>
                        <notebook>
                            <page string="Add Books">
                                <field name="issuebookslines_ids" widget="one2many" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create':True}">
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <field name="issue_books" invisible="1"/>
                                        <field name="author"/>
                                        <field name="genres"/>
                                        <field name="lang_id" widget="many2many_tags"/>
                                        <field name="issuebookslines_image" nolabel="1" widget="image" class="oe_right oe_avatar"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Fine Details">
                                <group colspan="4">
                                    <group string="Reason">
                                        <field name="fine_detail"/>
                                    </group>
                                    <group string="Fine Amount Detail">
                                        <field name="fine_amount"/>
                                    </group>
                            </group>
                            </page>
                            <page string="Fine Description">
                                <group>
                                    <field name="fine_description"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!--IssueBooks Form Tree View-->
        <record id="issuebook_tree_view" model="ir.ui.view">
            <field name="name">Issue Books Tree View</field>
            <field name="model">issue.books</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="issuebooks_code"/>
                    <field name="student_id"/>
                    <field name="standard"/>
                    <field name="division"/>
                    <field name="datetime_issue"/>
                    <field name="date_return"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

		<!--issuebooks kanban view -->
		<record model="ir.ui.view" id="issuebook_kanban_view">
            <field name="name">Issuebooks Kanban View</field>
            <field name="model">issue.books</field>
            <field name="arch" type="xml">
            	<kanban default_group_by="student_id" group_delete="false">
                    <field name = "id"/>
                    <field name = "name"/>
                    <field name = "student_id"/>
                    <field name = "standard"/>
                    <field name = "division"/>
                    <field name = "state"/>
                    <field name = "issuebooks_image"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_global_click">
                                <t t-if="record.issuebooks_image.raw_value">
                                    <div class="o_kanban_image">
                                        <img alt="Avatar" t-att-src="kanban_image('issue.books', 'issuebooks_image',record.id.raw_value)"/>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="o_kanban_image">
                                        <img alt="AvatarDefault" src='/jt_education_library/static/src/img/default_book.png'/>
                                    </div>
                                </t>
                                <div class="oe_kanban_details">
                                    <strong class="o_kanban_record_title">
                                        <field name="name"/><br/>
                                        <field name="student_id"/><br/>
                                        <field name = "standard"/> - <field name="division"/><br/>
                                        <field name = "state"/>
                                    </strong>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
        	</field>
        </record>

        <!--IssueBooks search view  -->
        <record id="issuebooks_search_view" model="ir.ui.view">
            <field name="name">Issue Books Search View</field>
            <field name="model">issue.books</field>
            <field name="arch" type="xml">
                <search string="Search Issue Books">
                    <!-- <field name="name"/> -->
                    <field name="student_id"/>
                    <field name="issuebooks_code"/>
                    <field name="state"/>
                    <filter string="Issued" name="issued" domain="[('state','=','issued')]"/>
                    <filter string="Returned" name="returned" domain="[('state','=','returned')]"/>
                    <filter string="Cancel" name="cancel" domain="[('state','=','cancel')]"/>
                    <filter string="Lost" name="lost" domain="[('state','=','lost')]"/>
                    <group expand="1" string="Group By">
                        <filter string="Availability" name="state" context="{'group_by':'state'}"/>
                        <filter string="Student ID" name="student_id" context="{'group_by':'student_id'}"/>
                    </group>
                </search>
            </field>
        </record>

    </data>
</odoo>